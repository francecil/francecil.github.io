(window.webpackJsonp=window.webpackJsonp||[]).push([[408],{1146:function(v,_,a){"use strict";a.r(_);var t=a(29),i=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[v._v("#")]),v._v(" 前言")]),v._v(" "),_("p",[v._v("本文是大学时上的「硬件设备组网与配置实验」的一些笔记")]),v._v(" "),_("h1",{attrs:{id:"交换机、路由器入门"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#交换机、路由器入门"}},[v._v("#")]),v._v(" 交换机、路由器入门")]),v._v(" "),_("h2",{attrs:{id:"tips"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[v._v("#")]),v._v(" Tips:")]),v._v(" "),_("ul",[_("li",[v._v("? 帮助\n"),_("ul",[_("li",[v._v("? \t//显示当前模式下可用的命令")]),v._v(" "),_("li",[v._v("sh?\t//显示当前模式下sh打头的命令")]),v._v(" "),_("li",[v._v("show  ?   //显示show命令后面可跟的参数")])])]),v._v(" "),_("li",[v._v("命令缩写\n"),_("ul",[_("li",[v._v("conf   t        //等价于configure terminal")])])]),v._v(" "),_("li",[v._v("命令补齐\n"),_("ul",[_("li",[v._v("conf\t//按TAB键自动补齐configure")])])]),v._v(" "),_("li",[v._v("R:路由器 S:交换机")])]),v._v(" "),_("h2",{attrs:{id:"实验室机柜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#实验室机柜"}},[v._v("#")]),v._v(" 实验室机柜")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://www.hongweipeng.com/usr/uploads/2016/04/3782366733.png",alt:"q2.png"}})]),v._v(" "),_("h2",{attrs:{id:"配置模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#配置模式"}},[v._v("#")]),v._v(" 配置模式")]),v._v(" "),_("h3",{attrs:{id:"用户模式-基本没用-最多query统计信息"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#用户模式-基本没用-最多query统计信息"}},[v._v("#")]),v._v(" 用户模式：基本没用，最多query统计信息")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[v._v("Switch>\n")])])]),_("h3",{attrs:{id:"特权模式-可查看配置-修改部分配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#特权模式-可查看配置-修改部分配置"}},[v._v("#")]),v._v(" 特权模式：可查看配置，修改部分配置，")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[v._v("ping ip\n//下面这个还未查证是在哪个模式 答：已查证\nsh ver 查看版本信息\nsh run 查看配置信息\n")])])]),_("blockquote",[_("p",[v._v("用户模式下通过"),_("code",[v._v("enable")]),v._v("命令进入 enable后带一个表示级别的数字\n注：特权模式下输入en 0 会进入用户模式，0表示级别。思科一共分为0-15共16个级别，其中用户登陆0-1级别会登陆到用户模式，用户登录2-15级别的到特权模式\n做实验时采用14级别")])]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[v._v("   Switch>en 14\n   //input password    \n　 Switch#\n")])])]),_("h3",{attrs:{id:"全局配置模式-特权模式下输入conf-t命令即可-用户在该模式下修改的配置是全局的。如修改主机名-hostname-xxx"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#全局配置模式-特权模式下输入conf-t命令即可-用户在该模式下修改的配置是全局的。如修改主机名-hostname-xxx"}},[v._v("#")]),v._v(" 全局配置模式：特权模式下输入conf t命令即可，用户在该模式下修改的配置是全局的。如修改主机名 :"),_("code",[v._v("hostname xxx")])]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[v._v("Switch#config\nSwitch<config>#\n")])])]),_("blockquote"),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[v._v("//查看接口信息\nsh 接口标识\n")])])]),_("h3",{attrs:{id:"接口模式-修改某接口下的配置-是局部的。如进入-vlan-新增ip"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#接口模式-修改某接口下的配置-是局部的。如进入-vlan-新增ip"}},[v._v("#")]),v._v(" 接口模式：修改某接口下的配置，是局部的。如"),_("code",[v._v("进入 vlan 新增ip")])]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",[_("code",[v._v("//配置接口带宽\nspeed  {10 | 100 | auto}\nduplex {half | full | auto}\n")])])]),_("p",[_("img",{attrs:{src:"https://www.hongweipeng.com/usr/uploads/2016/04/2623834922.png",alt:"q1.png"}})]),v._v(" "),_("hr"),v._v(" "),_("h1",{attrs:{id:"交换机s1-s2、路由器r1模拟pc机-通过另一台路由器r2互连"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#交换机s1-s2、路由器r1模拟pc机-通过另一台路由器r2互连"}},[v._v("#")]),v._v(" 交换机S1,S2、路由器R1模拟PC机 通过另一台路由器R2互连")]),v._v(" "),_("h2",{attrs:{id:"设置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#设置"}},[v._v("#")]),v._v(" 设置")]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("主路由")]),v._v("连接其他设备A(R/S,模拟PC)")])]),v._v(" "),_("ul",[_("li",[v._v("进入路由连接A的接口(机柜图R6232连接S3760-01 则进入f1/0的接口)模式")]),v._v(" "),_("li",[v._v("在该接口模式设置自己的ip，实际意义是 A 通过该ip来连接该路由")]),v._v(" "),_("li",[v._v("路由连接多个设备，所以对应的接口设置对应的ip（设为不同网域 xxx.xxx.1/2/3.1）")])]),v._v(" "),_("blockquote",[_("p",[v._v("交换机(模拟PC)连接路由")])]),v._v(" "),_("ul",[_("li",[_("p",[v._v("进入虚拟局域网接口模式"),_("code",[v._v("int VLAN 1")]),v._v(" （VLAN 1 无需ADD 默认有，路由默认也在该VLAN 1 下 所以接下来设置该对交换机和路由在同一个网域即可）")])]),v._v(" "),_("li",[_("p",[v._v("(有个疑问:VLAN 1是怎么和交换机连接路由的接口绑定在一起的 答：所有接口默认都在VLAN 1")])]),v._v(" "),_("li",[_("p",[v._v("由于交换机模拟PC 所以需要ip,在该接口模式下 "),_("code",[v._v("ip add <ip地址> <子网掩码>")])])]),v._v(" "),_("li",[_("p",[v._v("(子网掩码与局域网的作用详见google,简说就是非0位算起对应ip位置后面都是该局域网编号)")])]),v._v(" "),_("li",[_("p",[v._v("退到全局模式,设置默认网关(默认路由)，该默认网关地址即路由的ip地址")]),v._v(" "),_("ul",[_("li",[v._v("二层交换机 "),_("code",[v._v("ip default-gateway <默认网关地址>")])]),v._v(" "),_("li",[v._v("三层交换机\n"),_("ul",[_("li",[_("code",[v._v("ip route 0.0.0.0 0.0.0.0 <默认网关地址>")])]),v._v(" "),_("li",[_("code",[v._v("ip routing")]),v._v(" //开启路由,这个何时开启待实验，以及二层交换机和三层交换机设置区别是为什么?")])])])])]),v._v(" "),_("li",[_("p",[v._v("此时交换机和路由在同一个VLAN 1下，同时又在同一个网域下，故交换机与路由成功连通")])])]),v._v(" "),_("blockquote",[_("p",[v._v("路由(模拟PC)连接主路由")])]),v._v(" "),_("ul",[_("li",[_("p",[v._v("对应接口配置IP地址 "),_("code",[v._v("ip add <ip地址> <子网掩码>")])])]),v._v(" "),_("li",[_("p",[v._v("配置默认网关(即默认路由) "),_("code",[v._v("ip route 0.0.0.0 0.0.0.0 <默认网关地址>")])])])]),v._v(" "),_("h2",{attrs:{id:"测试"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[v._v("#")]),v._v(" 测试")]),v._v(" "),_("p",[_("strong",[v._v("PC间互ping ,即使是在不同网域，PC会先通过默认网关到达该路由，然后该路由转接到其他网关，再连接到对应网关网域的PC")])]),v._v(" "),_("hr"),v._v(" "),_("h1",{attrs:{id:"交换机划分vlan-跨交换机实现vlan"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#交换机划分vlan-跨交换机实现vlan"}},[v._v("#")]),v._v(" 交换机划分VLAN,跨交换机实现VLAN")]),v._v(" "),_("p",[v._v("上节说到，同一网域 且VLAN一致 设备可以互连\n本节做的是 多个路由通过交换机互连")]),v._v(" "),_("blockquote",[_("p",[v._v("首先 我们配置两台路由ip在同一个网域 xxx.xxx.1.1/2 例"),_("code",[v._v("ip add 192.168.1.1 255.255.255.0")]),v._v("\n他们物理上都连接了在同一个交换机 由于接口默认都是"),_("code",[v._v("VLAN 1")]),v._v("所以这两台路由即处于"),_("code",[v._v("同一个网域、同一个VLAN")]),v._v("\n故他们是可以直接连通的")])]),v._v(" "),_("ul",[_("li",[_("p",[v._v("接下来我们让这两台路由处于不同VLAN，配置如下")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("全局模式下创建VLAN : "),_("code",[v._v("S3760_01(config)#vlan 10")])])]),v._v(" "),_("li",[_("p",[v._v("给VLAN命名，便于存档，在S上无实际用处 "),_("code",[v._v("S3760_01(config-vlan)#name 10")])])]),v._v(" "),_("li",[_("p",[v._v("将端口(交换机连接路由A的端口)分配给VLAN:")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("S3760_01(config)#int f0/5")])]),v._v(" "),_("li",[v._v("将端口F0/5加入vlan 10:"),_("code",[v._v("S3760_01(config-if)#switchport access vlan 10")])])])]),v._v(" "),_("li",[_("p",[v._v("同样的，创建VLAN 20,把交换机连接路由B的端口 f0/15 分配给VLAN 20")])]),v._v(" "),_("li",[_("p",[v._v("测试：路由A ping 路由B发现ping 不通")])]),v._v(" "),_("li",[_("p",[v._v("结论：不同VLAN,即时在同一网域，如果交换机不作为默认网关(下文会做该实验)，两者是不能连通的。")])]),v._v(" "),_("li",[_("p",[v._v("其他：")]),v._v(" "),_("ul",[_("li",[v._v("删除VLAN :"),_("code",[v._v("switch(config)#no vlan 10")])]),v._v(" "),_("li",[v._v("查看已配置的VLAN信息 :"),_("code",[v._v("S3760_01#sh vlan")])])])])])]),v._v(" "),_("li",[_("p",[v._v("接下来我们实现下面这样的效果，PC3连接另一个交换机且处于VLAN 10, PC1和PC3在同一个网域，让它们能够连通\n"),_("img",{attrs:{src:"https://www.hongweipeng.com/usr/uploads/2016/04/2105159668.png",alt:"q3.png"}})]),v._v(" "),_("ul",[_("li",[_("p",[v._v("与上面一个实验一样，交换机S2126_01端口f0/1分配给VLAN 10,PC3设置ip")])]),v._v(" "),_("li",[_("p",[v._v("交换机之间的连接")]),v._v(" "),_("ul",[_("li",[v._v("交换机S3760_01、S2126_01相连的F0/24端口设定为Trunk模式")]),v._v(" "),_("li",[v._v("这里发现两个交换机之间接口一致，所以从其中任意一个设置如下")]),v._v(" "),_("li",[_("code",[v._v("S3760_01(config)#Int f0/24")]),v._v(" ，"),_("code",[v._v("S3760_01(config-if)#Switchport mode trunk")])])])]),v._v(" "),_("li",[_("p",[v._v("测试：PC3#ping pc1可以连通，pingPC2不能连通")])]),v._v(" "),_("li",[_("p",[v._v("结论：即使被多个连通的交换机隔开，只要在同一个VLAN和网域 是可以连通的")])]),v._v(" "),_("li",[_("p",[v._v("其他：交换机端口工作模式：")]),v._v(" "),_("ul",[_("li",[v._v("Access：大多用于接入层，也叫接入模式，常用于交换机与PC的连接")]),v._v(" "),_("li",[v._v("Trunk：中继模式，用于交换机与交换机，交换机与路由器，大多用于级联网络设备所以也叫干道模式。")]),v._v(" "),_("li",[v._v("Multi：一个端口可划分到多个VLAN,（以弃用）")])])])])]),v._v(" "),_("li",[_("p",[v._v("接下来补上面的提到的了，不同VLAN,不同网域，如果交换机作为默认网关，两者是可以连通的")])])]),v._v(" "),_("blockquote",[_("p",[v._v("其实原理和实验2一样，不同网域的PC设置其默认网关为交换机在该连通接口的ip,实验效果图如下：")])]),v._v(" "),_("p",[_("img",{attrs:{src:"https://www.hongweipeng.com/usr/uploads/2016/04/3521557871.png",alt:"q4.png"}})]),v._v(" "),_("blockquote",[_("p",[v._v("在上面实验基础上，我们做如下变动：")])]),v._v(" "),_("ul",[_("li",[v._v("修改PC1和PC2的ip网域不同")]),v._v(" "),_("li",[v._v("设置三层交换机VLAN间通讯\n"),_("ul",[_("li",[v._v("设置vlan虚接口ip地址,效果是该VLAN(如vlan 10)上的PC可以通过设置默认网关访问到该交换机，再转接其他网域\n"),_("ul",[_("li",[_("code",[v._v("int vlan 10")]),v._v(" !创建虚拟接口vlan 10")]),v._v(" "),_("li",[_("code",[v._v("ip addr 192.168.10.254 255.255.255.0")])]),v._v(" "),_("li",[_("code",[v._v("int vlan 20")])]),v._v(" "),_("li",[_("code",[v._v("ip add 192.168.20.254 255.255.255.0")])])])]),v._v(" "),_("li",[v._v("开启三层路由："),_("code",[v._v("ip routing")])])])]),v._v(" "),_("li",[v._v("设置PC1/2的默认网关，"),_("code",[v._v("ip rout 0.0.0.0 0.0.0.0 192.168.10.254/192.168.20.254;")])]),v._v(" "),_("li",[v._v("测试与结论：PC1与PC2处于不同VLAN,不同网域，但是可以通过交换机网关中转 ping通")])]),v._v(" "),_("hr")])}),[],!1,null,null,null);_.default=i.exports}}]);