(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{932:function(t,a,s){"use strict";s.r(a);var n=s(27),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("模块联邦（Module Federation）是 Webpack5 的一个新功能，支持将当前项目的部分模块或 lib 单独导出并打包得到远程构建产物，其他项目可以从"),a("strong",[t._v("指定的远程构建产物")]),t._v("中导入模块。")]),t._v(" "),a("p",[t._v("关注的几个问题：")]),t._v(" "),a("ol",[a("li",[t._v("导出模块，是否会导致模块代码加载？")]),t._v(" "),a("li",[t._v("远程加载，如何保证模块版本的正确性和稳定性？")])]),t._v(" "),a("h1",{attrs:{id:"新瓶装旧酒-模块联邦不是黑科技【wip】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新瓶装旧酒-模块联邦不是黑科技【wip】"}},[t._v("#")]),t._v(" 新瓶装旧酒：模块联邦不是黑科技【WIP】")]),t._v(" "),a("p",[t._v("模块联邦是一个内置的 Webpack 插件，")]),t._v(" "),a("p",[t._v("要想将项目的模块共享给其他模块，我们需要调整打包流程。")]),t._v(" "),a("p",[t._v("需要哪些信息？模块入口和模块名是要的，这样才能得到一份独立的构建产物。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出方配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ModuleFederationPlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModuleFederationPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aaa_app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aaaEntry.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("exposes")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'./Button'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/Button.jsx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入方配置")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("publicPath 也是要配的，entry 文件中寻找依赖，默认用的是 "),a("code",[t._v("/")]),t._v(" ，在其他项目就找不到了。")]),t._v(" "),a("p",[t._v("一旦独立构建了，那这个模块依赖的其他模块会被一起打包进去么？想想也知道肯定会，不然其他项目使用该模块的时候就缺依赖了。")]),t._v(" "),a("p",[t._v("那这样不是会导致重复代码加载？")]),t._v(" "),a("h1",{attrs:{id:"思想上是一个创新【wip】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思想上是一个创新【wip】"}},[t._v("#")]),t._v(" 思想上是一个创新【WIP】")]),t._v(" "),a("h1",{attrs:{id:"存在的问题【wip】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存在的问题【wip】"}},[t._v("#")]),t._v(" 存在的问题【WIP】")]),t._v(" "),a("ul",[a("li",[t._v("无法极致打包？")]),t._v(" "),a("li",[t._v("多版本和缓存问题？")])]),t._v(" "),a("h1",{attrs:{id:"继续学习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#继续学习"}},[t._v("#")]),t._v(" 继续学习")]),t._v(" "),a("ul",[a("li",[t._v("官方文档：https://webpack.docschina.org/concepts/module-federation/")]),t._v(" "),a("li",[t._v("示例仓库：https://github.com/module-federation/module-federation-examples")])]),t._v(" "),a("h1",{attrs:{id:"拓展阅读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拓展阅读"}},[t._v("#")]),t._v(" 拓展阅读")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/614907086",target:"_blank",rel:"noopener noreferrer"}},[t._v("新手向-为什么说 webpack 的 Module Federation 天生是模块级的微前端？ - 神说要有光的文章 - 知乎"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/115403616",target:"_blank",rel:"noopener noreferrer"}},[t._v("精读《Webpack5 新特性 - 模块联邦》"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/7198041700563370041",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块联邦(Module Federation)知识梳理"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/7138792768234586148",target:"_blank",rel:"noopener noreferrer"}},[t._v("hel-micro 模块联邦新革命"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/7048125682861703181",target:"_blank",rel:"noopener noreferrer"}},[t._v("一文通透讲解webpack5 module federation"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);