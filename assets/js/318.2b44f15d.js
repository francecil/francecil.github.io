(window.webpackJsonp=window.webpackJsonp||[]).push([[318],{1104:function(_,v,l){"use strict";l.r(v);var i=l(30),e=Object(i.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("p",[_._v("本文是对"),v("a",{attrs:{href:"https://mp.weixin.qq.com/s/uu0H2MTO1z1b8nsfuoyLQw",target:"_blank",rel:"noopener noreferrer"}},[_._v(" 一文彻底搞懂前端沙箱"),v("OutboundLink")],1),_._v(" 一文的精读，并进行部分内容补充")]),_._v(" "),v("p",[_._v("内容概要")]),_._v(" "),v("ol",[v("li",[_._v("沙箱是什么？")]),_._v(" "),v("li",[_._v("前端哪些场景需要用到沙箱？\n"),v("ol",[v("li",[_._v("业界应用举例")]),_._v(" "),v("li",[_._v("业务场景发散")])])]),_._v(" "),v("li",[_._v("怎么实现前端沙箱？\n"),v("ol",[v("li",[_._v("关注点")]),_._v(" "),v("li",[_._v("web 和 node 的差异")]),_._v(" "),v("li",[_._v("技术实现")]),_._v(" "),v("li",[_._v("如何避免安全问题？")])])]),_._v(" "),v("li",[_._v("如何避免动态执行脚本问题？")])]),_._v(" "),v("h2",{attrs:{id:"_1-沙箱是什么"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-沙箱是什么"}},[_._v("#")]),_._v(" 1. 沙箱是什么？")]),_._v(" "),v("p",[_._v("一种虚拟容器，可以安全运行不受信任的程序，且不影响外部宿主环境。\nhttps://en.wikipedia.org/wiki/Sandbox_(computer_security)")]),_._v(" "),v("p",[_._v("核心能力：")]),_._v(" "),v("ul",[v("li",[_._v("环境隔离")]),_._v(" "),v("li",[_._v("宿主安全")]),_._v(" "),v("li",[_._v("程序不可枚举")])]),_._v(" "),v("p",[_._v("沙箱范围大至操作系统层级（VMware、Docker），小至飞书文档的网页内嵌功能")]),_._v(" "),v("h2",{attrs:{id:"_2-前端哪些场景需要用到沙箱"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-前端哪些场景需要用到沙箱"}},[_._v("#")]),_._v(" 2. 前端哪些场景需要用到沙箱？")]),_._v(" "),v("ul",[v("li",[_._v("业界应用举例\n"),v("ul",[v("li",[_._v("CodeSandbox")]),_._v(" "),v("li",[_._v("小程序")]),_._v(" "),v("li",[_._v("微前端")])])]),_._v(" "),v("li",[_._v("业务场景发散（团队讨论）\n"),v("ul",[v("li",[_._v("Ultraman 自动化测试")]),_._v(" "),v("li",[_._v("发文-微前端")])])])]),_._v(" "),v("h2",{attrs:{id:"_3-如何实现前端沙箱"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-如何实现前端沙箱"}},[_._v("#")]),_._v(" 3. 如何实现前端沙箱？")]),_._v(" "),v("p",[_._v("核心关键点：作用域隔离、宿主能力限制")]),_._v(" "),v("p",[_._v("Web\n关注点：")]),_._v(" "),v("ul",[v("li",[_._v("作用域隔离")]),_._v(" "),v("li",[_._v("样式隔离")])]),_._v(" "),v("p",[_._v("作用域：")]),_._v(" "),v("ul",[v("li",[_._v("proxy、闭包：基于浏览器的 api 进行隔离，容易被绕过")]),_._v(" "),v("li",[_._v("iframe：")]),_._v(" "),v("li",[_._v("ShadowRealm：提供独立的运行环境，还在草稿阶段 https://tc39.es/proposal-shadowrealm/")])]),_._v(" "),v("p",[_._v("样式：")]),_._v(" "),v("ul",[v("li",[_._v("ShadowDOM：可以将某个 DOM 节点变成隔离节点，该隔离节点的样式和外部 DOM 树完全独立，相互不影响")]),_._v(" "),v("li",[_._v("iframe")]),_._v(" "),v("li",[_._v("CSS Module")]),_._v(" "),v("li",[_._v("namespace")]),_._v(" "),v("li",[_._v("Dynamic StyleSheet")]),_._v(" "),v("li",[_._v("css in js")])]),_._v(" "),v("p",[_._v("Node\n关注点：")]),_._v(" "),v("ul",[v("li",[_._v("作用域隔离")]),_._v(" "),v("li",[_._v("线程隔离，IO 隔离")])]),_._v(" "),v("p",[_._v("node 提供内置的模块 vm ，代码直接运行在 v8 ，实现执行环境隔离")]),_._v(" "),v("p",[_._v("存在的问题：")]),_._v(" "),v("ul",[v("li",[_._v("可以访问 process 对象")])]),_._v(" "),v("p",[_._v("vm2")]),_._v(" "),v("p",[_._v("如何避免安全问题\n白名单机制")])])}),[],!1,null,null,null);v.default=e.exports}}]);