(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{903:function(t,r,a){"use strict";a.r(r);var e=a(30),v=Object(e.a)({},(function(){var t=this,r=t._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"前言"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),r("p",[t._v("写下文本的灵感是阅读了这篇文章 - "),r("a",{attrs:{href:"https://mp.weixin.qq.com/s/8vXENzg580R7F2iNjSdHFw",target:"_blank",rel:"noopener noreferrer"}},[t._v("看完这篇垃圾回收，和面试官扯皮没问题了"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("该文通俗易懂，详略得当，虽然讲的是 java 的垃圾回收机制，但同样适合于 v8")]),t._v(" "),r("p",[t._v("本文会先介绍 V8 的内存模型，采用的分代回收算法，最后简单模拟垃圾回收整个过程")]),t._v(" "),r("h2",{attrs:{id:"v8-的内存限制"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#v8-的内存限制"}},[t._v("#")]),t._v(" V8 的内存限制")]),t._v(" "),r("p",[t._v("如何查看，如何调整，源码中的定义")]),t._v(" "),r("p",[t._v("堆内存相关代码都在 "),r("a",{attrs:{href:"https://github.com/v8/v8/tree/master/src/heap",target:"_blank",rel:"noopener noreferrer"}},[t._v("v8/src/heap 目录中"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("node 版本")]),t._v(" "),r("p",[t._v("chrome 浏览器")]),t._v(" "),r("p",[t._v("源码中的定义?")]),t._v(" "),r("p",[t._v("https://github.com/v8/v8/tree/master/src/heap")]),t._v(" "),r("p",[t._v("https://github.com/v8/v8/blob/4b9b23521e6fd42373ebbcb20ebe03bf445494f9/src/heap/heap-controller.h#L59")]),t._v(" "),r("h2",{attrs:{id:"内存结构"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内存结构"}},[t._v("#")]),t._v(" 内存结构")]),t._v(" "),r("p",[t._v("栈内存，堆内存。。")]),t._v(" "),r("h2",{attrs:{id:"垃圾回收"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#垃圾回收"}},[t._v("#")]),t._v(" 垃圾回收")]),t._v(" "),r("p",[t._v("1:2")]),t._v(" "),r("p",[t._v("8:1:1")]),t._v(" "),r("h3",{attrs:{id:"新生代"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#新生代"}},[t._v("#")]),t._v(" 新生代")]),t._v(" "),r("p",[t._v("标记复制，生命周期较短，需要保存的对象数量较少")]),t._v(" "),r("h3",{attrs:{id:"老生代"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#老生代"}},[t._v("#")]),t._v(" 老生代")]),t._v(" "),r("p",[t._v("采用标记清除，当空间不足时采用标记整理")]),t._v(" "),r("h3",{attrs:{id:"大对象"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#大对象"}},[t._v("#")]),t._v(" 大对象")]),t._v(" "),r("h3",{attrs:{id:"gc-时机"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gc-时机"}},[t._v("#")]),t._v(" GC 时机")]),t._v(" "),r("p",[t._v("增量标记，将 full gc 分割为多个阶段，中间允许穿插 js 任务")]),t._v(" "),r("h2",{attrs:{id:"模拟实现"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#模拟实现"}},[t._v("#")]),t._v(" 模拟实现")]),t._v(" "),r("p",[t._v("我们利用 js 数组来模拟堆内存，且规定值仅为 bool 值（取值为 true 表示该位置的 1 字节内存被使用）")]),t._v(" "),r("h2",{attrs:{id:"拓展阅读"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#拓展阅读"}},[t._v("#")]),t._v(" 拓展阅读")]),t._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"https://mp.weixin.qq.com/s/8vXENzg580R7F2iNjSdHFw",target:"_blank",rel:"noopener noreferrer"}},[t._v("看完这篇垃圾回收，和面试官扯皮没问题了"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("《深入浅出 Node.js》")]),t._v(" "),r("li",[r("a",{attrs:{href:"https://blog.mengxc.info/2019-04-28-V8%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/",target:"_blank",rel:"noopener noreferrer"}},[t._v("V8内存管理"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);r.default=v.exports}}]);