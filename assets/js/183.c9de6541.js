(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{962:function(e,t,r){"use strict";r.r(t);var a=r(30),_=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),t("p",[e._v("本文不会聚焦于某种构建工具的实现（比如 webpack），只会探讨底层基础技术\n同时 js 宿主环境不局限于传统 Web 页面，还涵盖 Node, Electron, Chrome Extension 等等")]),e._v(" "),t("p",[e._v("本文中，js 宿主环境会统称为应用")]),e._v(" "),t("h2",{attrs:{id:"热重载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#热重载"}},[e._v("#")]),e._v(" 热重载")]),e._v(" "),t("p",[e._v("在谈热更新前，我们先来说说另一种简单粗暴技术 -- 热重载")]),e._v(" "),t("p",[e._v("顾名思义，重载(reload)表示应用重启，会丢失状态。热重载(live reload)则表明文件出现变更，通知应用进行重载。对于 Web 页面，则表现为刷新页面")]),e._v(" "),t("p",[e._v("为方便起见，此处不讨论打包环节，项目代码是最传统的前端三件套")]),e._v(" "),t("p",[e._v("那么思考下这几个问题：")]),e._v(" "),t("ol",[t("li",[e._v("怎么告知浏览器页面需要 reload")]),e._v(" "),t("li",[e._v("打包的文件是放在内存还是磁盘中")])]),e._v(" "),t("p",[e._v("web socket")]),e._v(" "),t("p",[e._v("EventSource")]),e._v(" "),t("blockquote",[t("p",[e._v("本质是长连接不断发数据")])]),e._v(" "),t("p",[e._v("常见的 node 采用热重载")]),e._v(" "),t("h2",{attrs:{id:"热更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[e._v("#")]),e._v(" 热更新")]),e._v(" "),t("p",[e._v("核心原理：构建工具有自己的一套模块系统，当代码产生变动后，构建端能够找到变更的模块，并告知客户端重新请求并执行这些模块以及上层依赖模块")]),e._v(" "),t("p",[e._v("具体细节：")]),e._v(" "),t("ol",[t("li",[e._v("watch 模式下，会监听文件变更，并进行重打包")]),e._v(" "),t("li",[e._v("模块 chunk 打到内存中，通过 socket 传递给前端服务")]),e._v(" "),t("li",[e._v("若改变了全局状态，HMR 会失效，退化到 reload")])]),e._v(" "),t("h2",{attrs:{id:"拓展阅读"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拓展阅读"}},[e._v("#")]),e._v(" 拓展阅读")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/30669007",target:"_blank",rel:"noopener noreferrer"}},[e._v("Webpack HMR 原理解析"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/careteenL/webpack-hmr",target:"_blank",rel:"noopener noreferrer"}},[e._v("搞懂webpack热更新原理"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/30623057",target:"_blank",rel:"noopener noreferrer"}},[e._v("Webpack 热更新实现原理分析"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/magicg/p/13679273.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("轻松理解webpack热更新原理"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=_.exports}}]);